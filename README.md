REGZA keyword rec
================

REGZAのEメール録画予約機能を使って、指定したキーワードにマッチする番組を録画予約します

必要なもの
----------------

* Rubyの実行環境
* 送信用Gmailアカウント
* 受信用メールアドレス
* REGZAでEメール録画予約が設定済みであること

仕組み
----------------

テレビ王国( http://tv.so-net.ne.jp/ )の番組検索RSSを取得し、該当する番組について、REGZAのEメール録画予約の書式でメールを送信する。

使い方
----------------

1. area_idを特定して設定
   * http://tv.so-net.ne.jp/ にアクセス。
   * 地域を選択して、適当なキーワードで検索する。
   * 検索結果のRSSアイコンのリンク先URLを見て「stationAreaId=23」のようになってる部分の数値を確認する。
   * ソースコードの「area_id」の部分に記入する。
2. 検索キーワードを設定
   * ソースコードの「keywords」の部分に記入する。
3. メール送信設定
   * ソースコードの「smtp_user」「smtp_password」「mail_from」に送信用Gmailアカウントの情報を記入する。
   * ソースコードの「mail_to」に受信用メールアドレスを記入する。
4. メール予約パスワードの設定
   * ソースコードの「regza_password」にREGZAで設定した「メール予約パスワード」を記入する。
5. チャンネル設定
   * ソースコードの「platforms」にチャンネル設定を記入する。
   * '1'は地デジ、'2'はBSデジタル。
   * それぞれの中で、'リモコン番号' => 'チャンネル番号' となるように設定する。
   * チャンネル番号の詳細については、REGZAの説明書を参照。
     * 簡単に言うと、先頭の「D」は地デジ、「BS」はBSデジタルで、その後ろに3桁のチャンネル番号が来て、地デジの場合は最後に枝番がくる(らしい)。
   * ここで設定しないチャンネルについては、検索でマッチしても録画予約を行わない。だから、予約するつもりのない有料チャンネルなどはここに記入しないでおくといい。

これで、あとはこのスクリプトを実行すれば、処理が実行される。cronに登録するなどして定期的に実行されるようにすると良い。

動作確認
----------------

* 実行環境 : さくらインターネットのレンタルサーバ「スタンダードプラン」
* 受信用メールアドレス : さくらインターネット上に作成したメールアドレス
* REGZA : DBR-M190
* area_id : 17(宮城)

上記環境では確認済み。それ以外は未確認。